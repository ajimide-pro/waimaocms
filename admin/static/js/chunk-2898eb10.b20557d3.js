(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2898eb10"],{"0b23":function(e,a,s){},"1fb9":function(e,a,s){"use strict";s("0b23")},ecac:function(e,a,s){"use strict";s.r(a);var r=function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("div",{staticClass:"app-container"},[s("el-card",{staticClass:"box-card",staticStyle:{width:"50%",margin:"auto"}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[e._v("个人信息")])]),s("el-form",{ref:e.formName,attrs:{rules:e.rules,model:e.user}},[s("el-form-item",{attrs:{label:"用户头像",prop:"avatar"}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,accept:".jpg,.jpeg,.png,.gif,.bmp,.pdf,.JPG,.JPEG,.PBG,.GIF,.BMP","show-file-list":!1,headers:e.uploadHeaders,"on-remove":e.handleRemove,"on-success":e.uploadUrl_success,"before-upload":e.beforeImageUpload}},[e.user.avatar?s("img",{staticClass:"avatar",attrs:{src:e.user.avatar}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),s("el-form-item",{attrs:{label:"姓名",prop:"name"}},[s("el-input",{model:{value:e.user.name,callback:function(a){e.$set(e.user,"name",a)},expression:"user.name"}})],1),s("el-form-item",{attrs:{label:"登录账户",prop:"username"}},[s("el-input",{model:{value:e.user.username,callback:function(a){e.$set(e.user,"username",a)},expression:"user.username"}})],1),s("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[s("el-input",{attrs:{"show-password":"",placeholder:e.pwd_placeholder},model:{value:e.user.password,callback:function(a){e.$set(e.user,"password",a)},expression:"user.password"}})],1),s("el-form-item",[s("el-button",{staticClass:"fr",attrs:{type:"primary"},on:{click:e.submit}},[e._v("更 新")])],1)],1)],1)],1)},t=[],o=s("c24f"),l=s("a78e"),i=s.n(l),u=s("5f87"),n={name:"Profile",components:{},data:function(){return{uploadHeaders:"",uploadUrl:"",pwd_placeholder:"不修改请留空",formName:"user",show:!1,user:{name:"",username:"",password:""},rules:{name:[{required:!0,message:"用户姓名必须填写",trigger:"blur"}],username:[{required:!0,min:3,max:20,message:"登录账户长度在 3 到 20 个字符",trigger:"blur"}]}}},computed:{},created:function(){this.uploadUrl="/public/index.php/upload/image",this.uploadHeaders={lang:i.a.get("language"),Authorization:"bearer "+Object(u["a"])()},console.log(this.$store.state.user),this.user=this.$store.state.user},methods:{uploadUrl_success:function(e){200==e.code&&(this.user.avatar=e.data.url)},handleRemove:function(e){console.log(e)},selectAvatar:function(e){this.show=!1,this.user.avatar=e},submit:function(){var e=this;if(""!=this.user.password&&(this.user.password.length<5||this.user.password.length>20))return this.$message.error("密码长度必须是5-20位!"),!1;this.$refs["user"].validate((function(a){a&&Object(o["a"])(e.user).then((function(){e.$notify({title:"操作成功",message:"更新成功",type:"success",duration:2e3})})).catch((function(a){e.$notify({title:"错误",message:a.msg,type:"error",duration:2e3})}))}))},beforeImageUpload:function(e){var a="image/jpeg"===e.type||"image/png"===e.type||"image/jpg"===e.type||"image/gif"===e.type;a||this.$message.error("只支持 jpg/jpeg/png/gif 格式!");var s=!1;return s=e.size/1024/1024<5,s||this.$message.error("最大支持 5MB!"),a&&s}}},p=n,c=(s("1fb9"),s("2877")),d=Object(c["a"])(p,r,t,!1,null,null,null);a["default"]=d.exports}}]);